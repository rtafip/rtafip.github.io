<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Coq  入门学习笔记 （1） · 拖鞋党的拖鞋摊</title><meta name="description" content="Coq  入门学习笔记 （1） - 拖鞋党"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://en.ors-sro.com/atom.xml" title="拖鞋党的拖鞋摊"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/icon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/rss/" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Coq  入门学习笔记 （1）</h1><div class="post-info">Jun 11, 2017</div><div class="post-content"><p>鸡年当然要学习鸡语言啦。</p>
<a id="more"></a>
<h1 id="简介">简介</h1><p><a href="https://zh.wikipedia.org/wiki/Coq" target="_blank" rel="external">Coq</a> 是一个基于<a href="https://zh.wikipedia.org/wiki/%E6%9E%84%E9%80%A0%E6%BC%94%E7%AE%97" target="_blank" rel="external">构造演算</a>的定理证明辅助工具。</p>
<p>在开始玩耍之前需要到官网<a href="https://coq.inria.fr/download" target="_blank" rel="external">下载 Coq</a></p>
<p>安装完成后打开 Coq 的 REPL —— Coq.exe 。</p>
<p>打开后能看到类似内容</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Coq 8.6 (December 2016)&#10;&#10;Coq &#60;</span><br></pre></td></tr></table></figure>
<p>输入 <code>&quot;Hello World&quot;.</code> 打印 Hello World 。</p>
<p>然而并没有什么 Hello World :P 。</p>
<h2 id="普通的引理">普通的引理</h2><p>先来证明一个普通的引理，算是 Hello World 吧。</p>
<p>在 Coq 中输入一下内容。 被 <code>(*</code> 和 <code>*)</code> 括起来的是注释不用输入。  「Coq &lt;」 也不用输入。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Coq &#60; Section Minimal_Logic. (* &#20197;&#28857;&#21495;&#32467;&#23614;&#65292;&#31867;&#20284; C &#35821;&#35328;&#30340;&#20998;&#21495; *)&#10;&#10;Coq &#60; Variables A B C : Prop. (* &#22914;&#26524;&#36824;&#27809;&#36755;&#20837;&#28857;&#23601;&#25442;&#34892;&#20102;&#65292;&#21482;&#38656;&#36755;&#20837;&#28857;&#23601;&#33021;&#32467;&#26463; *)&#10;A is assumed&#10;B is assumed&#10;C is assumed&#10;&#10;Coq &#60; Goal (A -&#62; B -&#62; C) -&#62; (A -&#62; B) -&#62; A -&#62; C.&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  ============================&#10;  (A -&#62; B -&#62; C) -&#62; (A -&#62; B) -&#62; A -&#62; C&#10;&#10;Unnamed_thm &#60; auto.&#10;No more subgoals.</span><br></pre></td></tr></table></figure>
<p>证明完毕！到此结束，手动再见。</p>
<h2 id="简单的过程">简单的过程</h2><p>既然愿意了解，那么就一步步来。先撤销证明。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; Undo. &#65288;* U &#26159;&#22823;&#20889; *&#65289;&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  ============================&#10;  (A -&#62; B -&#62; C) -&#62; (A -&#62; B) -&#62; A -&#62; C</span><br></pre></td></tr></table></figure>
<p>输出的内容中 1 subgoal 说明只有一个目标需要证明</p>
<p><code>A, B, C : Prop</code> 表示 A B C 都是 Prop 。Prop 是命题 （<strong>Prop</strong>osition）的缩写。</p>
<p><code>============================</code> 是分割线。上面的内容是假设和条件。下面的内容是需要证明的部分。</p>
<p><code>(A -&gt; B -&gt; C) -&gt; (A -&gt; B) -&gt; A -&gt; C</code> 需要证明的内容。 用 <code>()</code> 括起来表示视为一个整体， <code>-&gt;</code> 为蕴涵。</p>
<p><code>A -&gt; B</code> 读作若 A 则 B。</p>
<p>接下来为了方便证明，需要引入一些假设。</p>
<p>使用 <code>intro</code> 引入<strong>一个</strong>假设。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; intro H.&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  H : A -&#62; B -&#62; C&#10;  ============================&#10;  (A -&#62; B) -&#62; A -&#62; C</span><br></pre></td></tr></table></figure>
<p>引入了假设 <code>H : A -&gt; B -&gt;C</code> 。证明的目标就变成了 <code>(A -&gt; B) -&gt; A -&gt; C</code>。</p>
<p>还可以引入多个假设。</p>
<p>多个假设使用 <code>intros</code> 就是 <code>intro</code> 加了 s 。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; intros H&#39; HA.&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  H : A -&#62; B -&#62; C&#10;  H&#39; : A -&#62; B&#10;  HA : A&#10;  ============================&#10;  C</span><br></pre></td></tr></table></figure>
<p>现在需要证明的目标变成了 <code>C</code> 。</p>
<p>观察已有条件，发现假设 <code>H : A -&gt; B -&gt; C</code> 蕴涵 <code>C</code>。当然演绎出 <code>C</code> 还需要 <code>A -&gt; B</code> 。</p>
<p>可以先应用假设，转化证明的目标。</p>
<p>应用假设使用 <code>apply</code> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; apply H.&#10;2 subgoals&#10;&#10;  A, B, C : Prop&#10;  H : A -&#62; B -&#62; C&#10;  H&#39; : A -&#62; B&#10;  HA : A&#10;  ============================&#10;  A&#10;&#10;subgoal 2 is:&#10; B</span><br></pre></td></tr></table></figure>
<p>现在目标变成了两个，一个 <code>A</code> 一个 <code>B</code> 。</p>
<p>观察已有条件，<code>A</code> 刚好是假设 <code>HA : A</code> 。</p>
<p>使用 <code>exact</code> 表示刚好。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; exact HA.&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  H : A -&#62; B -&#62; C&#10;  H&#39; : A -&#62; B&#10;  HA : A&#10;  ============================&#10;  B</span><br></pre></td></tr></table></figure>
<p>现在目标变成了 <code>B</code> 。</p>
<p>观察已有条件，假设 <code>H&#39; : A -&gt; B</code> 蕴含了 <code>B</code> 。</p>
<p>那么应用 <code>H&#39;</code> 即可。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; apply H&#39;.&#10;1 subgoal&#10;&#10;  A, B, C : Prop&#10;  H : A -&#62; B -&#62; C&#10;  H&#39; : A -&#62; B&#10;  HA : A&#10;  ============================&#10;  A</span><br></pre></td></tr></table></figure>
<p>现在目标变成了 <code>A</code>。</p>
<p>之前已经证明了 <code>A</code> 。这里可以用 <code>exact HA.</code> 。</p>
<p>也可以直接总结，表示目标已经证明。</p>
<p>总结使用 <code>assumption</code>。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; assumption.&#10;No more subgoals.</span><br></pre></td></tr></table></figure>
<p><code>No more subgoals</code> 说明没有需要证明的目标了。证明结束。</p>
<p>证明可以使用 <code>Save</code> 保存。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unnamed_thm &#60; Save trivial_lemma.&#10;intro H.&#10;(intros H&#39; HA).&#10;(apply H).&#10; exact HA.&#10;&#10; (apply H&#39;).&#10; assumption.&#10;&#10;Save trivial_lemma.&#10;trivial_lemma is defined</span><br></pre></td></tr></table></figure>
<p>中间的部分就是证明的过程。</p>
<h2 id="最后">最后</h2><p>这次就简单的写个 Hello World 的笔记。<a href="https://coq.inria.fr/tutorial/1-basic-predicate-calculus" target="_blank" rel="external">后面的内容</a>还需要慢慢整理。</p>
</div></article></div></main><footer><div class="paginator"><a href="/Curry-Howard-correspondence/" class="prev">上一篇</a><a href="/Debug-As-in-Flashdevelop/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 <a href="http://en.ors-sro.com">拖鞋党</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p><p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold; animation: breathe 3s infinite">Coding Pages</a></p></div></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    inlineMath: [ ['$','$'], ["\\\(","\\)"] ],
    processEscapes: true
    }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});
</script></body></html>