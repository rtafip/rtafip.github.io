<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Flash 脚本 · 拖鞋党的拖鞋摊</title><meta name="description" content="Flash 脚本 - 拖鞋党"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://en.ors-sro.com/atom.xml" title="拖鞋党的拖鞋摊"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/icon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/rss/" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Flash 脚本</h1><div class="post-info">Jul 30, 2017</div><div class="post-content"><p>此 Flash 脚本非 ActionScript</p>
<a id="more"></a>
<h2 id="简介">简介</h2><p>除了跑在 Flash Player 中的脚本 ActionScript ， Flash 还有一个跑在 Adobe Flash CC 的 JavaScript 。</p>
<p>Flash JavaScript 提供了大量的接口，方便执行制作 flash 的某些操作，比如机械重复的导出等。</p>
<h2 id="Hello_World">Hello World</h2><p>选择文件，新建，Flash JavaScript File 。</p>
<p>输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">1</span>) <span class="comment">//干，又不是 XSS</span></span><br></pre></td></tr></table></figure>
<p>保存。</p>
<p>双击保存的文件运行，或者选择菜单<strong>命令</strong>，运行命令，选择保存的文件。</p>
<p>成功的话就能看到在 flash 的一个弹框。</p>
<h2 id="Show_In_Stage">Show In Stage</h2><p>来一个复杂的例子。首先需要寻找借口，可以从<a href="http://help.adobe.com/en_US/flash/cs/extend/flash_cs5_extending.pdf" target="_blank" rel="external">官方的 API 手册</a>中查找。</p>
<p>官方手册非常详细，提供的 API 基本覆盖所有能够手动在 Adobe Flash CC 的操作。</p>
<p>比如其中的一页目录是这样的。</p>
<blockquote>
<p>Chapter 11: Document object<br>document.accName . . .  62<br>document.addDataToDocument() . . . 62<br>document.addDataToSelection() . . .  63<br>document.addFilter() . . .  64<br>document.addItem() . . .  64<br>document.addNewLine() . . . 65<br>document.addNewOval() . . .  66<br>document.addNewPrimitiveOval() . . .  66<br>document.addNewPrimitiveRectangle() . . .  67<br>document.addNewPublishProfile() . . .  68<br>document.addNewRectangle() . . .  69<br>document.addNewScene() . . . 70<br>document.addNewText() . . . 71</p>
</blockquote>
<p>例如做一个查找库中某个元件在哪里使用了，手册中就有类似的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将装有所有图层的数组赋值给 theLayers </span></span><br><span class="line"><span class="keyword">var</span> theLayers = fl.getDocumentDOM().getTimeline().layers;</span><br><span class="line"><span class="comment">// 创建一个用于装载所有 "myMovieClip" 实例的数组</span></span><br><span class="line"><span class="keyword">var</span> myArray = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"><span class="comment">// 计数器</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 循环所有图层</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; theLayers.length; i++) &#123;</span><br><span class="line">  <span class="comment">// 取第一个图层</span></span><br><span class="line">  <span class="comment">// 赋值给 "theElems"</span></span><br><span class="line">  <span class="keyword">var</span> theElems = theLayers[i].frames[<span class="number">0</span>].elements;</span><br><span class="line">  <span class="comment">// 循环所有图层上的元素</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> c = <span class="number">0</span>; c &lt; theElems.length; c++) &#123;</span><br><span class="line">    <span class="comment">// 检查是否为实例 （instance）</span></span><br><span class="line">    <span class="keyword">if</span> (theElems[c].elementType == <span class="string">"instance"</span>) &#123;</span><br><span class="line">      <span class="comment">// 检查是否为 "myMovieClip" 的实例</span></span><br><span class="line">      <span class="keyword">if</span> (theElems[c].libraryItem.name == <span class="string">"myMovieClip"</span>) &#123;</span><br><span class="line">        <span class="comment">// 装入数组</span></span><br><span class="line">        myArray[x] = theElems[c];</span><br><span class="line">        <span class="comment">// 递增计数器</span></span><br><span class="line">        x++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 选择所有 "myMovieClip" 的实例</span></span><br><span class="line">fl.getDocumentDOM().selection = myArray;</span><br></pre></td></tr></table></figure>
<p>这个例子只能检测当前元件的所有图层，如果要检测元件的子元件还需要调用 <code>document.enterEditMode()</code>，再递归一下就完成了。</p>
<h2 id="百足之虫">百足之虫</h2><p>Flash 自从<a href="https://www.apple.com/hotnews/thoughts-on-flash/" target="_blank" rel="external">乔帮主一战</a>后就萎靡不振，尤其是近几年在前端逐渐式微。</p>
<p>直到最近 <a href="http://www.tmtpost.com/2708187.html" target="_blank" rel="external">Adobe 宣判了 Flash 的死刑</a>， 在 2020 年正式停止开发。</p>
<p>即便如此，国内依然是 Flash 使用的重灾之地。各种令人作呕的页游，不思进取的视频网站还用着 Flash 播放器。</p>
<p>可以想象在很长的一段时间内 Flash 还会在国内苟延残喘。</p>
<p>但是现在确实可以不用学习 Flash 相关的技术了。ActionScript 什么的。</p>
<p>Flash 让制作动画变得很容易，大大丰富了当年前端的表现。</p>
<p>相比于 2008 年，现在离 2020 年更近。</p>
<p>它就像青春，只剩下美好的回忆。请让它静静消失而不是榨干最后一点力气，这样回想起那段闪客时代还能欣慰一笑。</p>
<p>Flash 你好， Flash  再见。</p>
</div></article></div></main><footer><div class="paginator"><a href="/Unlambda/" class="prev">上一篇</a><a href="/Ownership-and-Borrow-in-Rust/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 <a href="http://en.ors-sro.com">拖鞋党</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p><p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold; animation: breathe 3s infinite">Coding Pages</a></p></div></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    inlineMath: [ ['$','$'], ["\\\(","\\)"] ],
    processEscapes: true
    }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});
</script></body></html>