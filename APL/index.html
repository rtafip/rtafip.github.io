<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> APL · 拖鞋党的拖鞋摊</title><meta name="description" content="APL - 拖鞋党"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://en.ors-sro.com/atom.xml" title="拖鞋党的拖鞋摊"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/icon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/rss/" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">APL</h1><div class="post-info">Aug 27, 2017</div><div class="post-content"><p>不撸兔子</p>
<a id="more"></a>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>APL （A Programming Language 或者 APL Programming Language）是 Kenneth E. Iverson 于 1960 左右发明的一门基于数组的编程语言。紧凑而特殊的数学符号是它最鲜明的特点。</p>
<h2 id="简单的程序"><a href="#简单的程序" class="headerlink" title="简单的程序"></a>简单的程序</h2><p>APL 的 Hello world</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;Hello, world&apos;</span><br></pre></td></tr></table></figure>
<p>诶看起来好简单。因为 APL 是一个解释型语言。所以不用打印函数也是可以得。</p>
<p>那么再看一下比较简单的 APL 程序。下面是一个选择六个随机数的程序。</p>
<p>$x[⍋x←6?40]$</p>
<p>等会怎么变成数学公式了。因为 APL 大部分符号都是数学符号，所以用数学公式的方式显示比较自然。</p>
<p>如果熟悉了其中符号的含义，就能很轻松的理解了。</p>
<p>从右到左</p>
<p>$]$ 搭配左边的 $[$ 相当于数组下表访问符。</p>
<p>$?$ 是随机函数。$6?40$ 表示使用不放回的方式从 $[1,40] $ 抽取 6 次。</p>
<p>$←$ 赋值符号</p>
<p>$x$ 变量，可以是 $a$ , $b$ , $suibian$ 等。</p>
<p>$⍋$ 递增排序，返回下标。$⍋$ 7 5 6 8  的结果是 2 3 1 4 。最小的数是 5 ，对应的下标是 2 （下标从 1 开始不是 0 ）</p>
<p>所以程序是这样运行的。</p>
<p>$6?40$ 随机结果为 34 3 6 36 26 20</p>
<p>$x←6?40$ ，x 为 34 3 6 36 26 20</p>
<p>$⍋x$  递增排序，返回下标 2 3 6 5 1 4</p>
<p>x[2 3 6 5 1 4] 结果为 3 6 20 26 34 36</p>
<p>果然是很简单的程序呢。</p>
<h2 id="Primitive"><a href="#Primitive" class="headerlink" title="Primitive"></a>Primitive</h2><h3 id="一元形式"><a href="#一元形式" class="headerlink" title="一元形式"></a>一元形式</h3><table>
<thead>
<tr>
<th>Name(s)</th>
<th>Notation</th>
<th>Meaning</th>
<th>Unicode codepoint</th>
</tr>
</thead>
<tbody>
<tr>
<td>Roll</td>
<td><code>?B</code></td>
<td>从 $[1,B]$ 中随机一个数</td>
<td>U+003F ?</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions" target="_blank" rel="noopener">Ceiling</a></td>
<td><code>⌈B</code></td>
<td>大于等于 B 的最小整数</td>
<td>U+2308 ⌈</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions" target="_blank" rel="noopener">Floor</a></td>
<td><code>⌊B</code></td>
<td>小于等于 B 的最大整数</td>
<td>U+230A ⌊</td>
</tr>
<tr>
<td>Shape, <a href="https://en.wikipedia.org/wiki/Rho" target="_blank" rel="noopener">Rho</a></td>
<td><code>⍴B</code></td>
<td>B 的组件每个维度的数量</td>
<td>U+2374 ⍴</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Negation" target="_blank" rel="noopener">Not</a>, <a href="https://en.wikipedia.org/wiki/Tilde" target="_blank" rel="noopener">Tilde</a></td>
<td><code>∼B</code></td>
<td>∼1 为 0, ∼0 为 1</td>
<td>U+223C ∼</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Absolute_value" target="_blank" rel="noopener">Absolute value</a></td>
<td><code>∣B</code></td>
<td>B 的模</td>
<td>U+2223 ∣</td>
</tr>
<tr>
<td>Index generator, <a href="https://en.wikipedia.org/wiki/Iota" target="_blank" rel="noopener">Iota</a></td>
<td><code>⍳B</code></td>
<td>产生从1 到 B 的序列</td>
<td>U+2373 ⍳</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Exponentiation" target="_blank" rel="noopener">Exponential</a></td>
<td><code>⋆B</code></td>
<td>$e^B$</td>
<td>U+22C6 ⋆</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Negation" target="_blank" rel="noopener">Negation</a></td>
<td><code>−B</code></td>
<td>B 的相反数</td>
<td>U+2212 −</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Identity_function" target="_blank" rel="noopener">Identity</a></td>
<td><code>+B</code></td>
<td>返回 B</td>
<td>U+002B +</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Sign_function" target="_blank" rel="noopener">Signum</a></td>
<td><code>×B</code></td>
<td>返回 B 的符号。小于 0 返回¯1， 等于 0 返回 0 ，大于0 返回 1</td>
<td>U+00D7 ×</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Multiplicative_inverse" target="_blank" rel="noopener">Reciprocal</a></td>
<td><code>÷B</code></td>
<td>$1/B$</td>
<td>U+00F7 ÷</td>
</tr>
<tr>
<td>Ravel, Catenate, Laminate</td>
<td><code>,B</code></td>
<td>重塑 B 为向量</td>
<td>U+002C ,</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Matrix_inverse" target="_blank" rel="noopener">Matrix inverse</a>, Monadic Quad Divide</td>
<td><code>⌹B</code></td>
<td>矩阵 B 的逆</td>
<td>U+2339 ⌹</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Pi" target="_blank" rel="noopener">Pi</a> times</td>
<td><code>○B</code></td>
<td>$B \times \pi$</td>
<td>U+25CB ○</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Logarithm" target="_blank" rel="noopener">Logarithm</a></td>
<td><code>⍟B</code></td>
<td>$\ln B$</td>
<td>U+235F ⍟</td>
</tr>
<tr>
<td>Reversal</td>
<td><code>⌽B</code></td>
<td>沿着最后一个数轴反转 B 的元素</td>
<td>U+233D ⌽</td>
</tr>
<tr>
<td>Reversal</td>
<td><code>⊖B</code></td>
<td>沿着第一个数轴反转 B 的元素</td>
<td>U+2296 ⊖</td>
</tr>
<tr>
<td>Grade up</td>
<td><code>⍋B</code></td>
<td>返回升序排序 B 后元素下标</td>
<td>U+234B ⍋</td>
</tr>
<tr>
<td>Grade down</td>
<td><code>⍒B</code></td>
<td>返回降序排序 B 后元素下表</td>
<td>U+2352 ⍒</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Eval" target="_blank" rel="noopener">Execute</a></td>
<td><code>⍎B</code></td>
<td>执行一个 APL 表达式</td>
<td>U+234E ⍎</td>
</tr>
<tr>
<td>Monadic format</td>
<td><code>⍕B</code></td>
<td>最简化 B</td>
<td>U+2355 ⍕</td>
</tr>
<tr>
<td>Monadic <a href="https://en.wikipedia.org/wiki/Transpose" target="_blank" rel="noopener">transpose</a></td>
<td><code>⍉B</code></td>
<td>转置矩阵 B</td>
<td>U+2349 ⍉</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Factorial" target="_blank" rel="noopener">Factorial</a></td>
<td><code>!B</code></td>
<td>B! 从 1 乘到 B</td>
<td>U+0021 !</td>
</tr>
</tbody>
</table>
<h3 id="二元形式"><a href="#二元形式" class="headerlink" title="二元形式"></a>二元形式</h3><table>
<thead>
<tr>
<th>Name(s)</th>
<th>Notation</th>
<th>Meaning</th>
<th>Unicodecodepoint</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Addition" target="_blank" rel="noopener">Add</a></td>
<td><code>A+B</code></td>
<td>A 加 B</td>
<td>U+002B +</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Subtraction" target="_blank" rel="noopener">Subtract</a></td>
<td><code>A−B</code></td>
<td>A 减 B</td>
<td>U+2212 −</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Multiply" target="_blank" rel="noopener">Multiply</a></td>
<td><code>A×B</code></td>
<td>A 乘以 B</td>
<td>U+00D7 ×</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Division_(mathematics" target="_blank" rel="noopener">Divide</a>)</td>
<td><code>A÷B</code></td>
<td>A 除以 B</td>
<td>U+00F7 ÷</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Exponentiation" target="_blank" rel="noopener">Exponentiation</a></td>
<td><code>A⋆B</code></td>
<td>A 的 B 次方</td>
<td>U+22C6 ⋆</td>
</tr>
<tr>
<td>Circle</td>
<td><code>A○B</code></td>
<td>A = 1: $\sin(B)$  A = 2: $\cos(B)$ A = 3: $\tan(B)$ A=5: $\sinh(B)$ A = 6: $\cosh(B)$ A = 7: $\tanh(B)$</td>
<td>U+25CB ○</td>
</tr>
<tr>
<td>Deal</td>
<td><code>A?B</code></td>
<td>不放回从 $[1,B]$ 抽取 A 次</td>
<td>U+003F ?</td>
</tr>
<tr>
<td>Membership, Epsilon</td>
<td><code>A∈B</code></td>
<td>返回 1 ，如果 A 在 B 中，否则返回 0</td>
<td>U+2208 ∈</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Sample_maximum_and_minimum" target="_blank" rel="noopener">Maximum</a>, Ceiling</td>
<td><code>A⌈B</code></td>
<td>返回 A 和 B 中最大的一个</td>
<td>U+2308 ⌈</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Sample_maximum_and_minimum" target="_blank" rel="noopener">Minimum</a>, Floor</td>
<td><code>A⌊B</code></td>
<td>返回 A 和 B 中最小的一个</td>
<td>U+230A ⌊</td>
</tr>
<tr>
<td>Reshape, Dyadic <a href="https://en.wikipedia.org/wiki/Rho" target="_blank" rel="noopener">Rho</a></td>
<td><code>A⍴B</code></td>
<td>A 型数组，B 为数据。</td>
<td>U+2374 ⍴</td>
</tr>
<tr>
<td>Take</td>
<td><code>A↑B</code></td>
<td>根据 ×A 选择 B 中前（或后）A 个元素</td>
<td>U+2191 ↑</td>
</tr>
<tr>
<td>Drop</td>
<td><code>A↓B</code></td>
<td>根据 ×A 丢弃 B 中前（或后）A 个元素</td>
<td>U+2193 ↓</td>
</tr>
<tr>
<td>Decode</td>
<td><code>A⊥B</code></td>
<td>Value of a polynomial whose coefficients are <em>B</em> at <em>A</em></td>
<td>U+22A5 ⊥</td>
</tr>
<tr>
<td>Encode</td>
<td><code>A⊤B</code></td>
<td>Base-<em>A</em> representation of the value of <em>B</em></td>
<td>U+22A4 ⊤</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Modulo_operation" target="_blank" rel="noopener">Residue</a></td>
<td><code>A∣B</code></td>
<td>B 模 A</td>
<td>U+2223 ∣</td>
</tr>
<tr>
<td>Catenation</td>
<td><code>A,B</code></td>
<td>B 拼接 A</td>
<td>U+002C ,</td>
</tr>
<tr>
<td>Expansion, Dyadic Backslash</td>
<td><code>A\B</code></td>
<td>根据 A 中 0 的位置在 B 中插入 0 （或空格）</td>
<td>U+005C \</td>
</tr>
<tr>
<td>Compression, Dyadic Slash</td>
<td><code>A/B</code></td>
<td>根据 A 中 1 的位置在 B 中选择元素</td>
<td>U+002F /</td>
</tr>
<tr>
<td>Index of, Dyadic <a href="https://en.wikipedia.org/wiki/Iota" target="_blank" rel="noopener">Iota</a></td>
<td><code>A⍳B</code></td>
<td>A 在 B 中的下标。如果不在返回 <code>1+⍴A</code></td>
<td>U+2373 ⍳</td>
</tr>
<tr>
<td>Matrix divide, Dyadic Quad Divide</td>
<td><code>A⌹B</code></td>
<td>矩阵除法</td>
<td>U+2339 ⌹</td>
</tr>
<tr>
<td>Rotation</td>
<td><code>A⌽B</code></td>
<td>The elements of <em>B</em> are rotated <em>A</em> positions</td>
<td>U+233D ⌽</td>
</tr>
<tr>
<td>Rotation</td>
<td><code>A⊖B</code></td>
<td>The elements of <em>B</em> are rotated <em>A</em> positions along the first axis</td>
<td>U+2296 ⊖</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Logarithm" target="_blank" rel="noopener">Logarithm</a></td>
<td><code>A⍟B</code></td>
<td>$\log_{A}{B}$</td>
<td>U+235F ⍟</td>
</tr>
<tr>
<td>Dyadic format</td>
<td><code>A⍕B</code></td>
<td>Format <em>B</em> into a character matrix according to <em>A</em></td>
<td>U+2355 ⍕</td>
</tr>
<tr>
<td>General transpose</td>
<td><code>A⍉B</code></td>
<td>The axes of <em>B</em> are ordered by <em>A</em></td>
<td>U+2349 ⍉</td>
</tr>
<tr>
<td>Combinations</td>
<td><code>A!B</code></td>
<td>二项式$C^{a}_{b}$</td>
<td>U+0021 !</td>
</tr>
<tr>
<td>Diaeresis, Dieresis, Double-Dot</td>
<td><code>A¨B</code></td>
<td>Over each, or perform each separately; <em>B</em> = on these; <em>A</em> = operation to perform or using(e.g. iota)</td>
<td>U+00A8 ¨</td>
</tr>
<tr>
<td>Less than</td>
<td><code>A&lt;B</code></td>
<td>小于返回 1 ，否则返回 0</td>
<td>U+003C &lt;</td>
</tr>
<tr>
<td>Less than or equal</td>
<td><code>A≤B</code></td>
<td>小于等于返回 1，否则返回 0</td>
<td>U+2264 ≤</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Equality_(mathematics" target="_blank" rel="noopener">Equal</a>)</td>
<td><code>A=B</code></td>
<td>等于返回 1 ，否则返回 0</td>
<td>U+003D =</td>
</tr>
<tr>
<td>Greater than or equal</td>
<td><code>A≥B</code></td>
<td>大于等于返回 1，否则返回 0</td>
<td>U+2265 ≥</td>
</tr>
<tr>
<td>Greater than</td>
<td><code>A&gt;B</code></td>
<td>大于返回 1 ，否则返回 0</td>
<td>U+003E &gt;</td>
</tr>
<tr>
<td>Not equal</td>
<td><code>A≠B</code></td>
<td>不等于返回 1 ，否则返回 0</td>
<td>U+2260 ≠</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Logical_disjunction" target="_blank" rel="noopener">Or</a></td>
<td><code>A∨B</code></td>
<td>二进制或，A 和 B 都为 0 时返回 0 。否则返回 1</td>
<td>U+2228 ∨</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Logical_conjunction" target="_blank" rel="noopener">And</a></td>
<td><code>A∧B</code></td>
<td>二进制与，A 和 B 都为 1 时返回 1 。否则返回 0</td>
<td>U+2227 ∧</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Logical_NOR" target="_blank" rel="noopener">Nor</a></td>
<td><code>A⍱B</code></td>
<td>二进制或非。</td>
<td>U+2371 ⍱</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/Sheffer_stroke" target="_blank" rel="noopener">Nand</a></td>
<td><code>A⍲B</code></td>
<td>二进制与非</td>
<td>U+2372 ⍲</td>
</tr>
</tbody>
</table>
<p>更多例子参考<a href="https://en.wikipedia.org/wiki/APL_syntax_and_symbols" target="_blank" rel="noopener">维基</a>。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>生命游戏</p>
<p>$life←{↑1 ⍵∨.∧3 4=+/,¯1 0 1∘.⊖¯1 0 1∘.⌽⊂⍵}$</p>
<p>字数排序</p>
<p>$X[⍋X+.≠’ ‘;]$</p>
<p>移除 HTML 标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">txt←&apos;&lt;html&gt;&lt;body&gt;&lt;p&gt;This is &lt;em&gt;emphasized&lt;/em&gt; text.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&apos;</span><br><span class="line">⎕←&#123;⍵/⍨~&#123;⍵∨≠\⍵&#125;⍵∊&apos;&lt;&gt;&apos;&#125;txt</span><br></pre></td></tr></table></figure>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>APL 的奇怪符号可以通过专用键盘输入。如果你不喜欢这种奇怪的符号，那么……</p>
</div></article></div></main><footer><div class="paginator"><a href="/Right-value-reference-and-Universal-reference/" class="prev">上一篇</a><a href="/C-header-issues/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2018 <a href="http://en.ors-sro.com">拖鞋党</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p><p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold; animation: breathe 3s infinite">Coding Pages</a></p></div></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    inlineMath: [ ['$','$'], ["\\\(","\\)"] ],
    processEscapes: true
    }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});
</script></body></html>